---
import type { CollectionEntry } from 'astro:content';
import BaseLayout from './BaseLayout.astro';

type Props = CollectionEntry<'blog'>['data'];

const { title, description, pubDate, updatedDate, tags } = Astro.props;

const formatDate = (date: Date) => {
	return date.toISOString().split('T')[0];
};
---

<BaseLayout title={title} description={description}>
	<article>
		<a href="/" class="back">‚Üê cd ..</a>
		
		<header class="post-header">
			<h1>{title}</h1>
			<div class="meta">
				<span class="date">{formatDate(pubDate)}</span>
				{tags && tags.length > 0 && (
					<>
						<span class="separator">|</span>
						<span class="tags">
							{tags.map((tag) => (
								<span class="tag">#{tag}</span>
							))}
						</span>
					</>
				)}
			</div>
		</header>
		
		<div class="content">
			<slot />
		</div>
	</article>
</BaseLayout>

<style>
	article {
		max-width: 100%;
	}

	.back {
		display: inline-block;
		font-size: 0.875rem;
		color: var(--text-muted);
		margin-bottom: 2rem;
	}

	.back:hover {
		color: var(--accent-teal);
	}

	.post-header {
		margin-bottom: 2.5rem;
	}

	h1 {
		font-size: 1.75rem;
		font-weight: 600;
		margin: 0 0 0.75rem 0;
		line-height: 1.3;
	}

	.meta {
		display: flex;
		align-items: center;
		gap: 0.75rem;
		font-size: 0.875rem;
	}

	.date {
		color: var(--text-muted);
	}

	.separator {
		color: var(--text-muted);
	}

	.tags {
		display: flex;
		gap: 0.5rem;
	}

	.tag {
		color: var(--accent-pink);
	}

	.content {
		line-height: 1.75;
	}

	.content :global(h2) {
		font-size: 1.125rem;
		font-weight: 500;
		margin-top: 2.5rem;
		margin-bottom: 1rem;
		color: var(--text-primary);
	}

	.content :global(h2::before) {
		content: '## ';
		color: var(--accent-teal);
	}

	.content :global(h3) {
		font-size: 1rem;
		font-weight: 500;
		margin-top: 2rem;
		margin-bottom: 0.75rem;
		color: var(--text-primary);
	}

	.content :global(h3::before) {
		content: '### ';
		color: var(--accent-teal);
	}

	.content :global(p) {
		margin-bottom: 1.25rem;
		color: var(--text-secondary);
	}

	.content :global(ul),
	.content :global(ol) {
		color: var(--text-secondary);
		padding-left: 1.5rem;
		margin-bottom: 1.25rem;
	}

	.content :global(li) {
		margin-bottom: 0.5rem;
	}

	.content :global(strong) {
		color: var(--text-primary);
		font-weight: 500;
	}

	.content :global(pre) {
		background-color: var(--bg-secondary);
		border: 1px solid var(--border);
		border-radius: 8px;
		padding: 1.25rem;
		margin: 1.5rem 0;
		overflow-x: auto;
		position: relative;
	}

	.content :global(pre code) {
		background: none;
		padding: 0;
		font-size: 0.875rem;
		color: var(--text-secondary);
	}

	.content :global(code) {
		font-family: 'JetBrains Mono', monospace;
		background-color: var(--bg-tertiary);
		padding: 0.2em 0.4em;
		border-radius: 4px;
		font-size: 0.9em;
	}

	.content :global(blockquote) {
		border-left: 3px solid var(--accent-teal);
		margin: 1.5rem 0;
		padding: 0.5rem 0 0.5rem 1.25rem;
		color: var(--text-secondary);
		font-style: italic;
	}

	.content :global(a) {
		color: var(--accent-teal);
	}

	.content :global(a:hover) {
		color: var(--accent-blue);
	}

	.content :global(img) {
		max-width: 100%;
		border-radius: 8px;
		margin: 1.5rem 0;
	}

	.content :global(hr) {
		border: none;
		border-top: 1px solid var(--border);
		margin: 2rem 0;
	}
</style>
